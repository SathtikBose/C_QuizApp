<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>C Quiz – Chapter 2 (Operators)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      /* --- Original Excellent Styling --- */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: #0f172a;
        color: #e5e7eb;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 16px;
      }
      .container {
        background: #020617;
        width: 100%;
        max-width: 720px;
        border-radius: 16px;
        padding: 24px 24px 28px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
        border: 1px solid #1f2937;
      }
      .title {
        font-size: 22px;
        font-weight: 700;
        text-align: center;
        margin-bottom: 4px;
      }
      .subtitle {
        text-align: center;
        font-size: 13px;
        color: #9ca3af;
        margin-bottom: 18px;
      }
      .progress-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        font-size: 13px;
        color: #9ca3af;
        gap: 8px;
        flex-wrap: wrap;
      }
      .timer {
        font-weight: 600;
        color: #facc15;
      }
      .progress-bar {
        position: relative;
        width: 100%;
        height: 6px;
        border-radius: 999px;
        overflow: hidden;
        background: #111827;
        margin-bottom: 16px;
      }
      .progress-fill {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        width: 0%;
        border-radius: 999px;
        background: linear-gradient(90deg, #22c55e, #3b82f6);
        transition: width 0.25s ease-out;
      }
      .question {
        font-size: 17px;
        font-weight: 600;
        margin-bottom: 14px;
      }
      .options {
        display: grid;
        gap: 8px;
        margin-bottom: 16px;
      }
      .option {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 12px;
        background: #020617;
        border-radius: 10px;
        border: 1px solid #1f2937;
        cursor: pointer;
        transition: 0.15s;
        font-size: 14px;
      }
      .option:hover {
        border-color: #4b5563;
        background: #030712;
      }
      .option input {
        accent-color: #3b82f6;
        cursor: pointer;
        flex-shrink: 0;
      }
      .meta {
        font-size: 12px;
        color: #9ca3af;
        margin-bottom: 12px;
        display: flex;
        justify-content: space-between;
        gap: 8px;
        flex-wrap: wrap;
      }
      .btn-row {
        display: flex;
        justify-content: space-between;
        gap: 10px;
        flex-wrap: wrap;
      }
      button {
        border: none;
        border-radius: 999px;
        padding: 8px 18px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: 0.15s;
      }
      .btn-secondary {
        background: #111827;
        color: #e5e7eb;
      }
      .btn-primary {
        background: #2563eb;
        color: #f9fafb;
      }
      .btn-primary:disabled {
        background: #1f2937;
        cursor: not-allowed;
      }
      .hidden {
        display: none;
      }
      .result-card {
        padding-top: 8px;
      }
      .row {
        display: flex;
        justify-content: space-between;
        padding: 6px 0;
        border-bottom: 1px solid #1f2933;
        font-size: 14px;
      }
      .correct {
        color: #22c55e;
      }
      .incorrect {
        color: #f97373;
      }

      /* --- NEW: Review Section Styling --- */
      #review-section {
        margin-top: 24px;
        text-align: left;
      }
      .review-item {
        background: #0f172a;
        border: 1px solid #1f2937;
        border-radius: 8px;
        padding: 12px;
        margin-bottom: 12px;
      }
      .review-q {
        font-weight: 600;
        font-size: 14px;
        margin-bottom: 6px;
      }
      .review-ans {
        font-size: 13px;
        margin-top: 4px;
      }
      .review-container {
        max-height: 350px;
        overflow-y: auto;
        padding-right: 8px;
        margin-top: 10px;
      }
      /* Custom Scrollbar for Review */
      .review-container::-webkit-scrollbar {
        width: 6px;
      }
      .review-container::-webkit-scrollbar-thumb {
        background: #1f2937;
        border-radius: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div id="quiz-screen">
        <div class="title">C Programming Quiz</div>
        <div class="subtitle">Chapter 2 – Operators & Instructions</div>

        <div class="progress-row">
          <span id="q-counter">Question 1 of 20</span>
          <span class="timer" id="timer">Time: 00:00</span>
          <span id="attempt-info">Not answered yet</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>

        <div class="question" id="question-text"></div>
        <div class="options" id="options-container"></div>

        <div class="meta">
          <span id="level-text">Level: 1</span>
          <span id="instant-feedback"></span>
        </div>

        <div class="btn-row">
          <button class="btn-secondary" id="prev-btn">Previous</button>
          <button class="btn-secondary" id="next-btn">Next</button>
          <button class="btn-primary" id="submit-btn">Submit Quiz</button>
        </div>
      </div>

      <div id="result-screen" class="hidden">
        <div class="result-card">
          <div class="title">Quiz Completed!</div>
          <div class="stats">
            <div class="row">
              <span class="label">Total Questions</span>
              <span class="value" id="res-total">20</span>
            </div>
            <div class="row">
              <span class="label">Correct</span>
              <span class="value correct" id="res-correct">0</span>
            </div>
            <div class="row">
              <span class="label">Incorrect</span>
              <span class="value incorrect" id="res-incorrect">0</span>
            </div>
            <div class="row">
              <span class="label">Accuracy</span>
              <span class="value" id="res-percent">0%</span>
            </div>
            <div class="row">
              <span class="label">Time Taken</span>
              <span class="value" id="res-time">00:00</span>
            </div>
          </div>

          <div id="review-section">
            <h3 style="font-size: 16px; color: #9ca3af; margin-bottom: 8px">
              Review Mistakes:
            </h3>
            <div class="review-container" id="review-container"></div>
          </div>

          <button
            class="btn-primary"
            style="width: 100%; margin-top: 20px"
            onclick="location.reload()"
          >
            Try Again
          </button>
        </div>
      </div>
    </div>

    <script>
      const questions = [
        {
          text: "Which operator is used to find the remainder of a division?",
          options: ["/", "%", "\\", "rem"],
          correctIndex: 1,
          level: 1,
        },
        {
          text: "What is the result of 5 + 2 * 3 in C?",
          options: ["21", "11", "10", "13"],
          correctIndex: 1,
          level: 1,
        },
        {
          text: "Which of the following is NOT a relational operator?",
          options: ["==", "<=", "!", "!="],
          correctIndex: 2,
          level: 1,
        },
        {
          text: "In C, a non-zero value is treated as:",
          options: ["False", "True", "Undefined", "Null"],
          correctIndex: 1,
          level: 1,
        },
        {
          text: "Which operator has the highest precedence?",
          options: ["+", "*", "()", "="],
          correctIndex: 2,
          level: 1,
        },
        {
          text: "The expression x = x + 5 can be written as:",
          options: ["x += 5", "x =+ 5", "x == 5", "x++ 5"],
          correctIndex: 0,
          level: 2,
        },
        {
          text: "What is the value of x after: int x = 4 % 5;?",
          options: ["0", "1", "4", "5"],
          correctIndex: 2,
          level: 2,
        },
        {
          text: "Which operator is used for 'Logical AND'?",
          options: ["&", "||", "&&", "!"],
          correctIndex: 2,
          level: 2,
        },
        {
          text: 'What will printf("%d", 5 > 3 && 2 < 1); output?',
          options: ["1", "0", "True", "Error"],
          correctIndex: 1,
          level: 2,
        },
        {
          text: "What is the result of (int) 3.99?",
          options: ["4", "3.9", "3", "0"],
          correctIndex: 2,
          level: 2,
        },
        {
          text: "If a = 10 and b = 20, what does a == b return?",
          options: ["10", "1", "0", "20"],
          correctIndex: 2,
          level: 2,
        },
        {
          text: "Which of these is a Unary operator?",
          options: ["+", "++", "&&", "*"],
          correctIndex: 1,
          level: 2,
        },
        {
          text: "What is the output of 5 / 2 in C?",
          options: ["2.5", "2", "3", "2.0"],
          correctIndex: 1,
          level: 3,
        },
        {
          text: "What is the output of 5.0 / 2?",
          options: ["2.5", "2", "2.0", "Error"],
          correctIndex: 0,
          level: 3,
        },
        {
          text: "Evaluate: int x = 1, y = 0, z = 5; z = x && y || z; What is z?",
          options: ["0", "1", "5", "6"],
          correctIndex: 1,
          level: 3,
        },
        {
          text: "What is the value of 'a' after: int a = 10; a /= 2 + 3;?",
          options: ["8", "5", "2", "7"],
          correctIndex: 2,
          level: 3,
        },
        {
          text: "Which of the following is invalid in C?",
          options: [
            "int a=b=c=10;",
            "int a=10; b=a;",
            "int a=(int)1.9;",
            "Both A and B",
          ],
          correctIndex: 1,
          level: 3,
        },
        {
          text: "What is the value of 2 ^ 3 in C? (XOR Operator)",
          options: ["8", "1", "5", "6"],
          correctIndex: 1,
          level: 3,
        },
        {
          text: 'What is the output of printf("%d", !100);?',
          options: ["0", "1", "-100", "Error"],
          correctIndex: 0,
          level: 3,
        },
        {
          text: "Default associativity of arithmetic operators (+, -, *, /)?",
          options: ["Right to Left", "Left to Right", "Top to Bottom", "None"],
          correctIndex: 1,
          level: 3,
        },
      ];

      let currentIndex = 0;
      const userAnswers = Array(questions.length).fill(-1);
      let timerStarted = false,
        startTime = 0,
        elapsedMs = 0,
        timerInterval = null;

      function renderQuestion() {
        const q = questions[currentIndex];
        document.getElementById("question-text").textContent = q.text;
        document.getElementById("q-counter").textContent = `Question ${
          currentIndex + 1
        } of ${questions.length}`;
        document.getElementById("level-text").textContent = `Level: ${q.level}`;
        document.getElementById("progress-fill").style.width = `${
          ((currentIndex + 1) / questions.length) * 100
        }%`;

        const optionsContainer = document.getElementById("options-container");
        optionsContainer.innerHTML = "";
        q.options.forEach((opt, idx) => {
          const label = document.createElement("label");
          label.className = "option";
          label.innerHTML = `<input type="radio" name="opt" value="${idx}" ${
            userAnswers[currentIndex] === idx ? "checked" : ""
          }> <span>${opt}</span>`;
          label.onclick = () => {
            if (!timerStarted) {
              timerStarted = true;
              startTime = Date.now();
              startTimer();
            }
            userAnswers[currentIndex] = idx;
            document.getElementById("attempt-info").textContent = "Answered";
          };
          optionsContainer.appendChild(label);
        });
        document.getElementById("prev-btn").disabled = currentIndex === 0;
        document.getElementById("next-btn").textContent =
          currentIndex === questions.length - 1 ? "Finish" : "Next";
      }

      function startTimer() {
        timerInterval = setInterval(() => {
          elapsedMs = Date.now() - startTime;
          const totalSecs = Math.floor(elapsedMs / 1000);
          const m = Math.floor(totalSecs / 60)
            .toString()
            .padStart(2, "0");
          const s = (totalSecs % 60).toString().padStart(2, "0");
          document.getElementById("timer").textContent = `Time: ${m}:${s}`;
        }, 1000);
      }

      document.getElementById("next-btn").onclick = () => {
        if (currentIndex < questions.length - 1) {
          currentIndex++;
          renderQuestion();
        }
      };
      document.getElementById("prev-btn").onclick = () => {
        if (currentIndex > 0) {
          currentIndex--;
          renderQuestion();
        }
      };

      document.getElementById("submit-btn").onclick = () => {
        if (userAnswers.includes(-1)) {
          alert("Please answer all questions before submitting!");
          return;
        }
        clearInterval(timerInterval);
        showResults();
      };

      function showResults() {
        let correctCount = 0;
        const reviewContainer = document.getElementById("review-container");
        reviewContainer.innerHTML = "";

        questions.forEach((q, i) => {
          const isCorrect = userAnswers[i] === q.correctIndex;
          if (isCorrect) correctCount++;

          // Create Review Item
          const item = document.createElement("div");
          item.className = "review-item";
          item.style.borderLeft = isCorrect
            ? "4px solid #22c55e"
            : "4px solid #f97373";

          item.innerHTML = `
            <div class="review-q">${i + 1}. ${q.text}</div>
            <div class="review-ans">
              <span class="${isCorrect ? "correct" : "incorrect"}">
                ${isCorrect ? "✅" : "❌"} Your choice: ${
            q.options[userAnswers[i]]
          }
              </span>
              ${
                !isCorrect
                  ? `<br><span class="correct">✔️ Correct: ${
                      q.options[q.correctIndex]
                    }</span>`
                  : ""
              }
            </div>
          `;
          reviewContainer.appendChild(item);
        });

        // Update Stats
        document.getElementById("res-correct").textContent = correctCount;
        document.getElementById("res-incorrect").textContent =
          questions.length - correctCount;
        document.getElementById("res-percent").textContent = `${Math.round(
          (correctCount / questions.length) * 100
        )}%`;
        document.getElementById("res-time").textContent = document
          .getElementById("timer")
          .textContent.replace("Time: ", "");

        // Switch Screen
        document.getElementById("quiz-screen").classList.add("hidden");
        document.getElementById("result-screen").classList.remove("hidden");
      }

      renderQuestion();
    </script>
  </body>
</html>
